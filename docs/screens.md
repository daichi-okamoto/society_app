# 画面要件（MVP）

## 共通
- 対応端末: PC/スマホ
- 認証必須: 登録ユーザーのみ（未登録でも過去大会結果と画像は閲覧可）
- メール通知: 重要イベントはメール送信
- 権限区分: 運営, 代表, メンバー

## 一般画面

### トップ/過去大会一覧
- 目的: 過去大会の閲覧、最新大会への導線
- 表示
- 大会一覧（過去含む）
- 大会名、開催日、会場、結果リンク
- 画像閲覧の導線
- アクション
- 大会詳細へ遷移

### 大会詳細
- 表示
- 大会情報（開催日、会場、試合時間、参加費、参加上限）
- 参加チーム一覧
- 申込状況（ログイン時）
- 試合結果/順位表リンク
- 画像ギャラリーリンク（参加者のみ）
- アクション
- 大会参加申込
- 申込キャンセル（締切内のみ）

### 試合結果/順位表
- 表示
- 試合一覧、スコア
- 順位表

### チーム一覧
- 表示
- 自分の所属チーム
- 参加可能なチーム（参加コード入力導線）
- アクション
- チーム作成
- 参加コード入力

### チーム作成
- 入力
- チーム名
- バリデーション
- 必須、1-50文字
- 結果
- チーム作成時に参加コード自動発行
- 作成者は代表として登録

### 参加コード入力
- 入力
- 参加コード
- バリデーション
- 必須、英数字のみ、6-12文字
- 結果
- 参加申請を作成
- 代表承認待ち表示へ遷移

### 参加申請/承認待ち
- 表示
- 承認待ちステータス
- 申請日時
- アクション
- 申請取り下げ

### チーム詳細/メンバー管理
- 表示
- チーム情報
- メンバー一覧
- 参加申請一覧（代表のみ）
- アクション
- 参加申請の承認/却下（代表のみ）
- 代表移譲（代表/運営）
- メンバー削除（代表のみ）

### 代表移譲
- 入力
- 移譲先メンバー選択
- バリデーション
- 既存メンバーのみ選択可
- 結果
- 代表権限の移譲

### 大会参加申込
- 前提
- 代表のみ操作可
- 入力
- 対象チーム選択
- 確認: 参加費、試合時間、キャンセル締切
- バリデーション
- チーム人数が7人以上
- 結果
- 申込作成（運営承認待ち）

### 支払い方法選択
- 入力
- 支払い方法: カード or 当日現金
- バリデーション
- 必須選択
- 結果
- カード決済の場合はStripe決済画面へ
- 当日現金の場合は支払いステータスをpending

### カード決済
- 表示
- 決済金額
- 結果
- Stripe決済成功で支払い完了
- 失敗時は再試行

### 申込キャンセル
- 条件
- 大会前日まで: 全額返金（Stripe手数料控除）
- それ以降: 返金不可
- 結果
- 申込ステータスをcancelledに更新
- 決済がcardの場合はStripe返金を実行

### マイページ
- 表示
- 所属チーム
- 申込状況/決済状況
- 参加大会履歴
- プロフィール
- アクション
- プロフィール編集

### プロフィール編集
- 入力
- 氏名、ふりがな、生年月日、電話、メール、住所
- バリデーション
- 必須: 氏名、ふりがな、生年月日、電話、メール
- メールは一意
- 電話番号は数字とハイフン
- 生年月日は過去日付のみ
- 権限
- 本人のみ編集可

### 画像ギャラリー
- 表示
- 大会の画像一覧
- アクション
- 画像閲覧、ダウンロード
- 権限
- 大会に参加したチームのメンバーのみ閲覧可

## 運営画面

### 管理ログイン
- 入力
- メール、パスワード

### 大会管理
- 表示
- 大会一覧、ステータス
- アクション
- 大会作成/編集

### 大会作成/編集
- 入力
- 大会名、開催日、会場、試合時間、参加上限、参加費
- 参加費通貨、キャンセル締切日
- 説明
- バリデーション
- 開催日は未来日
- 参加上限は1以上
- 参加費は0以上

### 参加申込管理
- 表示
- 申込一覧、ステータス
- アクション
- 承認/却下
- 通知
- 承認/却下時にメール通知

### チーム/メンバー管理
- 表示
- チーム一覧、メンバー
- アクション
- 代表移譲
- メンバー削除
- 参加申請の状態確認

### 試合作成/編集
- 入力
- 試合カード、キックオフ時刻、コート番号
- バリデーション
- 同一チームの重複対戦は警告

### 結果入力/順位表更新
- 入力
- スコア
- バリデーション
- 0以上の整数

### 通知管理
- 全体お知らせ
- 入力
- タイトル、本文、公開日時
- 個別連絡
- 送信対象、件名、本文
- 通知
- アプリ内通知とメール送信

### リアルタイム通知（運営）
- 入力
- タイトル、本文
- 送信タイミング（即時/予約）
- 送信対象（全体/大会/チーム/ユーザー）
- アクション
- 通知送信
- 結果
- 対象ユーザーの画面でバナー/バッジ表示

### 決済管理
- 表示
- 申込ごとの支払い状況
- 返金状況

### 保険名簿CSV出力
- 出力
- 氏名、ふりがな、生年月日、電話、メール、住所、チーム名

### 画像管理
- 入力
- 大会選択、画像アップロード
- バリデーション
- 画像形式（jpg, png）
- サイズ上限
- アクション
- 公開/非公開切替
