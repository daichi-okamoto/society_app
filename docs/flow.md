# 画面遷移 / 業務フロー（実装同期版）

最終更新: 2026-02-26

## 一般ユーザー
```mermaid
flowchart TD
  A["ホーム"] --> B["大会詳細（未エントリー）"]
  B --> C["大会エントリー"]
  C --> D["エントリー確認"]
  D --> E["エントリー完了"]
  E --> F["名簿提出"]
  F --> G["提出済み名簿確認"]

  A --> H["チーム管理"]
  H --> I["メンバー一覧"]
  I --> J["手動メンバー追加（恒久）"]
  H --> K["招待コード共有（TS-xxxxxx）"]
  A --> L["参加コード入力"]
  L --> M["参加申請 pending"]
  M --> N["キャプテン承認/却下"]
```

## 名簿提出フロー（恒久メンバーと大会限定ゲストの分離）
```mermaid
flowchart TD
  A["名簿提出画面"] --> B["チームメンバー選択"]
  A --> C["ゲスト選手追加（この大会のみ）"]
  B --> D["POST /tournaments/:id/entry_roster"]
  C --> D
  D --> E["entry_rosters / entry_roster_players に保存"]
  E --> F["提出済み名簿確認画面"]
  E --> G["保険CSV出力（管理者）"]
```

## 管理者
```mermaid
flowchart TD
  A["管理ダッシュボード"] --> B["チーム管理"]
  B --> C["承認待ち一覧"]
  C --> D["チーム詳細"]
  D --> E["承認する"]
  D --> F["利用停止"]

  A --> G["大会管理"]
  G --> H["大会詳細/結果管理"]
  A --> I["決済管理"]
  A --> J["通知管理"]
```

## 補足ルール
- チーム作成・メンバー追加は `approval_status=pending` でも可能
- 大会エントリーはチーム承認状態に依存（未承認チームは制限）
- 名簿提出のゲストは大会限定で、チーム一覧/チームメンバーへ混入しない
- 招待コードは `TS-xxxxxx`（6桁ランダム数字）を使用
